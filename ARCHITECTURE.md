# ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸ - Health Signage

## æ¦‚è¦

Health Signage ã¯1920x540pxã‚µã‚¤ãƒãƒ¼ã‚¸ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤å‘ã‘ã®å¥åº·ç®¡ç†Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚ã‚·ãƒ³ãƒ—ãƒ«ãª3å±¤ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã§æ§‹æˆã•ã‚Œã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ã®å¥åº·ãƒ‡ãƒ¼ã‚¿è¨˜éŒ²ãƒ»å¯è¦–åŒ–ã‚’å®Ÿç¾ã—ã¦ã„ã¾ã™ã€‚

## ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åƒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Health Signage System                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚   Presentation  â”‚    â”‚    Business     â”‚    â”‚      Data       â”‚         â”‚
â”‚  â”‚     Layer       â”‚    â”‚     Layer       â”‚    â”‚     Layer       â”‚         â”‚
â”‚  â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚         â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚         â”‚
â”‚  â”‚ â”‚ HTML/CSS/JS â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ Flask App   â”‚ â”‚â—„â”€â”€â–ºâ”‚ â”‚ SQLite DB   â”‚ â”‚         â”‚
â”‚  â”‚ â”‚             â”‚ â”‚    â”‚ â”‚             â”‚ â”‚    â”‚ â”‚             â”‚ â”‚         â”‚
â”‚  â”‚ â”‚ Chart.js    â”‚ â”‚    â”‚ â”‚ REST API    â”‚ â”‚    â”‚ â”‚ mood_entriesâ”‚ â”‚         â”‚
â”‚  â”‚ â”‚ Font Awesomeâ”‚ â”‚    â”‚ â”‚ Data Logic  â”‚ â”‚    â”‚ â”‚ settings    â”‚ â”‚         â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚    â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## è©³ç´°ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 1. ãƒ—ãƒ¬ã‚¼ãƒ³ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼ˆFrontendï¼‰

#### æ§‹æˆè¦ç´ 
```
static/
â”œâ”€â”€ css/
â”‚   â””â”€â”€ style.css          # ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”œâ”€â”€ js/
â”‚   â””â”€â”€ app.js             # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰åˆ¶å¾¡
â””â”€â”€ (å¤–éƒ¨CDN)
    â”œâ”€â”€ Chart.js 4.4       # ã‚°ãƒ©ãƒ•æç”»ãƒ©ã‚¤ãƒ–ãƒ©ãƒª
    â””â”€â”€ Font Awesome 6.4   # ã‚¢ã‚¤ã‚³ãƒ³ãƒ©ã‚¤ãƒ–ãƒ©ãƒª

templates/
â””â”€â”€ index.html             # ãƒ¡ã‚¤ãƒ³UIãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ
```

#### è²¬å‹™
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹**: ã‚¿ãƒƒãƒãƒ‘ãƒãƒ«æœ€é©åŒ–UI
- **ãƒ‡ãƒ¼ã‚¿å¯è¦–åŒ–**: Chart.jsã«ã‚ˆã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚°ãƒ©ãƒ•æç”»
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**: å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã€ãƒœã‚¿ãƒ³åˆ¶å¾¡
- **APIé€šä¿¡**: Fetch APIã«ã‚ˆã‚‹ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰é€šä¿¡

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **HTML5**: ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯ãƒãƒ¼ã‚¯ã‚¢ãƒƒãƒ—
- **CSS3**: ãƒ•ãƒ¬ãƒƒã‚¯ã‚¹ãƒœãƒƒã‚¯ã‚¹ã€ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **Vanilla JavaScript**: ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ä¸ä½¿ç”¨
- **Chart.js**: ã‚­ãƒ£ãƒ³ãƒã‚¹ãƒ™ãƒ¼ã‚¹ã‚°ãƒ©ãƒ•æç”»
- **Font Awesome**: SVGã‚¢ã‚¤ã‚³ãƒ³

### 2. ãƒ“ã‚¸ãƒã‚¹å±¤ï¼ˆBackendï¼‰

#### æ§‹æˆè¦ç´ 
```python
app.py
â”œâ”€â”€ Flask Application     # Webã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³æœ¬ä½“
â”œâ”€â”€ Route Handlers        # HTTP ãƒªã‚¯ã‚¨ã‚¹ãƒˆå‡¦ç†
â”œâ”€â”€ Database Operations   # DB CRUDæ“ä½œ
â”œâ”€â”€ Data Validation      # å…¥åŠ›å€¤æ¤œè¨¼
â””â”€â”€ Business Logic       # ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«
```

#### ä¸»è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

##### Flask Application
```python
app = Flask(__name__)
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã€ãƒ›ã‚¹ãƒˆã€ãƒãƒ¼ãƒˆè¨­å®š
app.run(debug=True, host='0.0.0.0', port=5001)
```

##### Route Handlers
| ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ | ãƒ¡ã‚½ãƒƒãƒ‰ | è²¬å‹™ |
|----------------|----------|------|
| `/` | GET | ãƒ¡ã‚¤ãƒ³ãƒšãƒ¼ã‚¸è¡¨ç¤º |
| `/api/entries` | GET | ãƒ‡ãƒ¼ã‚¿å–å¾— |
| `/api/entries` | POST | ãƒ‡ãƒ¼ã‚¿ä¿å­˜ |
| `/api/generate-dummy` | POST | ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ |

##### Data Processing Flow
```
HTTP Request â†’ Route Handler â†’ Data Validation â†’ Database Operation â†’ HTTP Response
```

#### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯
- **Flask 3.0**: è»½é‡Webãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **SQLite3**: çµ„ã¿è¾¼ã¿ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
- **Python 3.8+**: ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°è¨€èª
- **Jinja2**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚¨ãƒ³ã‚¸ãƒ³

### 3. ãƒ‡ãƒ¼ã‚¿å±¤ï¼ˆDatabaseï¼‰

#### ã‚¹ã‚­ãƒ¼ãƒè¨­è¨ˆ
```sql
-- ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ«
CREATE TABLE mood_entries (
    id INTEGER PRIMARY KEY AUTOINCREMENT,      -- ã‚µãƒ­ã‚²ãƒ¼ãƒˆã‚­ãƒ¼
    date DATE NOT NULL UNIQUE,                 -- ãƒŠãƒãƒ¥ãƒ©ãƒ«ã‚­ãƒ¼ï¼ˆè¨˜éŒ²æ—¥ï¼‰
    mood INTEGER DEFAULT 3,                    -- æ°—åˆ†ã‚¹ã‚³ã‚¢
    sleep_hours INTEGER DEFAULT 7,             -- ç¡çœ æ™‚é–“
    creative_hours INTEGER DEFAULT 0,          -- ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–æ™‚é–“
    meal_count INTEGER DEFAULT 0,              -- é£Ÿäº‹å›æ•°
    exercise_minutes INTEGER DEFAULT 0,        -- é‹å‹•æ™‚é–“
    took_medicine INTEGER DEFAULT 0,           -- è–¬æœç”¨ãƒ•ãƒ©ã‚°
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,  -- ä½œæˆæ—¥æ™‚
    updated_at DATETIME DEFAULT CURRENT_TIMESTAMP   -- æ›´æ–°æ—¥æ™‚
);

-- è¨­å®šãƒ†ãƒ¼ãƒ–ãƒ«ï¼ˆå°†æ¥æ‹¡å¼µç”¨ï¼‰
CREATE TABLE settings (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    key TEXT UNIQUE NOT NULL,
    value TEXT NOT NULL
);
```

#### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æˆ¦ç•¥
```sql
-- æ—¥ä»˜ã§ã®é«˜é€Ÿæ¤œç´¢ç”¨
CREATE UNIQUE INDEX idx_mood_entries_date ON mood_entries(date);

-- æ—¥ä»˜ç¯„å›²æ¤œç´¢ç”¨ï¼ˆå°†æ¥ã®æœ€é©åŒ–ï¼‰
CREATE INDEX idx_mood_entries_date_range ON mood_entries(date DESC);
```

#### ãƒ‡ãƒ¼ã‚¿åˆ¶ç´„
- **UNIQUEåˆ¶ç´„**: 1æ—¥1ãƒ¬ã‚³ãƒ¼ãƒ‰ã®åˆ¶ç´„
- **NOT NULLåˆ¶ç´„**: å¿…é ˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ä¿è¨¼
- **DEFAULTå€¤**: å®Ÿç”¨çš„ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
- **å‹åˆ¶ç´„**: INTEGERå‹ã«ã‚ˆã‚‹å€¤ç¯„å›²åˆ¶é™

## ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

### 1. ãƒ‡ãƒ¼ã‚¿å…¥åŠ›ãƒ•ãƒ­ãƒ¼
```
User Input â†’ JavaScript Event â†’ Data Validation â†’ Fetch API â†’ Flask Route â†’ SQLite â†’ Response â†’ Chart Update
```

#### è©³ç´°ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
1. **ãƒ¦ãƒ¼ã‚¶ãƒ¼æ“ä½œ**: ãƒœã‚¿ãƒ³ã‚¯ãƒªãƒƒã‚¯ã€ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼æ“ä½œ
2. **ã‚¤ãƒ™ãƒ³ãƒˆå‡¦ç†**: JavaScriptã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼å®Ÿè¡Œ
3. **ãƒ‡ãƒ¼ã‚¿æ›´æ–°**: `currentData`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ›´æ–°
4. **APIå‘¼ã³å‡ºã—**: `saveData()`é–¢æ•°å®Ÿè¡Œ
5. **HTTPé€šä¿¡**: `POST /api/entries`
6. **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: Flaskå´ã§ã®å…¥åŠ›å€¤æ¤œè¨¼
7. **DBæ“ä½œ**: `INSERT OR REPLACE`æ–‡å®Ÿè¡Œ
8. **ãƒ¬ã‚¹ãƒãƒ³ã‚¹**: JSONå½¢å¼ã§çµæœè¿”å´
9. **UIæ›´æ–°**: `loadCharts()`é–¢æ•°ã§ã‚°ãƒ©ãƒ•å†æç”»

### 2. ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»è¡¨ç¤ºãƒ•ãƒ­ãƒ¼
```
Page Load â†’ API Call â†’ Database Query â†’ JSON Response â†’ Chart.js Rendering
```

#### è©³ç´°ã‚·ãƒ¼ã‚±ãƒ³ã‚¹
1. **ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿**: `DOMContentLoaded`ã‚¤ãƒ™ãƒ³ãƒˆ
2. **åˆæœŸåŒ–**: `loadCharts()`é–¢æ•°å®Ÿè¡Œ
3. **APIå‘¼ã³å‡ºã—**: `GET /api/entries?days=14`
4. **DBæ¤œç´¢**: æŒ‡å®šæœŸé–“ã®ãƒ‡ãƒ¼ã‚¿å–å¾—
5. **ãƒ‡ãƒ¼ã‚¿å‡¦ç†**: æ—¥ä»˜è£œå®Œã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤è¨­å®š
6. **ã‚°ãƒ©ãƒ•æç”»**: Chart.jsã«ã‚ˆã‚‹è¤‡æ•°ã‚°ãƒ©ãƒ•æç”»
7. **UIæ›´æ–°**: ã‚°ãƒ©ãƒ•ã¨ãƒ¬ã‚¸ã‚§ãƒ³ãƒ‰ã®è¡¨ç¤º

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­è¨ˆ

### ç¾åœ¨ã®å®Ÿè£…ãƒ¬ãƒ™ãƒ«
- **ãƒ­ãƒ¼ã‚«ãƒ«å°‚ç”¨**: å¤–éƒ¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¢ã‚¯ã‚»ã‚¹æƒ³å®šå¤–
- **åŸºæœ¬æ¤œè¨¼**: å‹ãƒã‚§ãƒƒã‚¯ã€ç¯„å›²ãƒã‚§ãƒƒã‚¯
- **SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³å¯¾ç­–**: ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åŒ–ã‚¯ã‚¨ãƒªä½¿ç”¨

### å°†æ¥ã®å¼·åŒ–é …ç›®
1. **èªè¨¼ãƒ»èªå¯**: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
2. **å…¥åŠ›æ¤œè¨¼**: ã‚ˆã‚Šå³å¯†ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
3. **HTTPS**: SSL/TLSæš—å·åŒ–
4. **CORS**: ã‚¯ãƒ­ã‚¹ã‚ªãƒªã‚¸ãƒ³åˆ¶å¾¡
5. **ãƒ¬ãƒ¼ãƒˆåˆ¶é™**: API ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¨­è¨ˆ

### ç¾åœ¨ã®æœ€é©åŒ–
- **è»½é‡ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Flask ã®æ¡ç”¨
- **åŠ¹ç‡çš„DB**: SQLite ã®ã‚·ãƒ³ãƒ—ãƒ«æ€§
- **CDNåˆ©ç”¨**: Chart.jsã€Font Awesome
- **æœ€å°é™DOMæ“ä½œ**: å¿…è¦æ™‚ã®ã¿Chartå†æç”»

### ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è€ƒæ…®äº‹é …

#### ãƒ‡ãƒ¼ã‚¿é‡ã®å¢—åŠ å¯¾å¿œ
```python
# ç¾åœ¨: ~1000ãƒ¬ã‚³ãƒ¼ãƒ‰å¯¾å¿œ
# å°†æ¥: 10,000+ ãƒ¬ã‚³ãƒ¼ãƒ‰å¯¾å¿œç­–

# 1. ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
@app.route('/api/entries')
def get_entries():
    page = request.args.get('page', 1, type=int)
    per_page = request.args.get('per_page', 50, type=int)
    offset = (page - 1) * per_page
    # LIMIT/OFFSET ã‚¯ã‚¨ãƒª

# 2. ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
CREATE INDEX idx_mood_entries_date_desc ON mood_entries(date DESC);

# 3. ãƒ‡ãƒ¼ã‚¿é›†ç´„
CREATE VIEW daily_stats AS 
SELECT date, AVG(mood) as avg_mood, AVG(sleep_hours) as avg_sleep
FROM mood_entries GROUP BY date;
```

#### åŒæ™‚ã‚¢ã‚¯ã‚»ã‚¹å¯¾å¿œ
```python
# 1. æ¥ç¶šãƒ—ãƒ¼ãƒªãƒ³ã‚°
from sqlalchemy import create_engine
engine = create_engine('sqlite:///mood.db', pool_size=20)

# 2. éåŒæœŸå‡¦ç†
from flask import Flask
from flask_caching import Cache
app = Flask(__name__)
cache = Cache(app, config={'CACHE_TYPE': 'simple'})

@cache.memoize(timeout=300)
def get_cached_entries(days):
    # ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿèƒ½ä»˜ããƒ‡ãƒ¼ã‚¿å–å¾—
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°è¨­è¨ˆ

### éšå±¤çš„ã‚¨ãƒ©ãƒ¼å‡¦ç†
```
Frontend Error â†’ User Feedback
     â†“
Backend Error â†’ Log + HTTP Status
     â†“
Database Error â†’ Rollback + Recovery
```

#### JavaScript ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```javascript
async function saveData() {
    try {
        const response = await fetch('/api/entries', {
            method: 'POST',
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(currentData)
        });
        
        if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
        }
        
        const result = await response.json();
        if (result.success) {
            loadCharts();
        } else {
            showUserError('ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ');
        }
    } catch (error) {
        console.error('ä¿å­˜ã‚¨ãƒ©ãƒ¼:', error);
        showUserError('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ');
    }
}
```

#### Flask ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
```python
@app.errorhandler(404)
def not_found(error):
    return jsonify({'error': 'Not Found'}), 404

@app.errorhandler(500)
def internal_error(error):
    db.session.rollback()
    return jsonify({'error': 'Internal Server Error'}), 500

def save_entry_with_error_handling(data):
    try:
        # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ“ä½œ
        conn = sqlite3.connect('mood.db')
        cursor = conn.cursor()
        # INSERT OR REPLACE å®Ÿè¡Œ
        conn.commit()
        return {'success': True}
    except sqlite3.Error as e:
        conn.rollback()
        app.logger.error(f'Database error: {e}')
        return {'error': 'Database operation failed'}, 500
    finally:
        conn.close()
```

## ãƒ†ã‚¹ãƒˆè¨­è¨ˆ

### ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
```
Unit Tests (å˜ä½“ãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ Backend API Tests
â”œâ”€â”€ Database Tests  
â””â”€â”€ Frontend Function Tests

Integration Tests (çµåˆãƒ†ã‚¹ãƒˆ)
â”œâ”€â”€ API â†” Database
â””â”€â”€ Frontend â†” Backend

E2E Tests (ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ†ã‚¹ãƒˆ)
â””â”€â”€ Browser Automation Tests
```

### ãƒ†ã‚¹ãƒˆå®Ÿè£…ä¾‹
```python
# backend_test.py
import unittest
from app import app, init_db

class HealthSignageTest(unittest.TestCase):
    def setUp(self):
        self.app = app.test_client()
        self.app.testing = True
        init_db()
    
    def test_get_entries(self):
        response = self.app.get('/api/entries?days=7')
        self.assertEqual(response.status_code, 200)
        data = response.get_json()
        self.assertIsInstance(data, list)
    
    def test_post_entry(self):
        test_data = {
            'mood': 4,
            'sleep_hours': 8,
            'creative_hours': 3,
            'meal_count': 3,
            'exercise_minutes': 30,
            'took_medicine': 1
        }
        response = self.app.post('/api/entries', json=test_data)
        self.assertEqual(response.status_code, 200)
        result = response.get_json()
        self.assertTrue(result['success'])
```

## ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆè¨­è¨ˆ

### é–‹ç™ºç’°å¢ƒ
```
Developer Machine
â”œâ”€â”€ Python 3.8+ + venv
â”œâ”€â”€ SQLite (ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹)
â”œâ”€â”€ Flask Development Server
â””â”€â”€ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ–ãƒ©ã‚¦ã‚¶
```

### æœ¬ç•ªç’°å¢ƒï¼ˆæ¨å¥¨ï¼‰
```
Production Server
â”œâ”€â”€ Python 3.8+ + venv
â”œâ”€â”€ Gunicorn (WSGI Server)
â”œâ”€â”€ Nginx (Reverse Proxy)
â”œâ”€â”€ SQLite or PostgreSQL
â”œâ”€â”€ SSL/TLS Certificate
â””â”€â”€ ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š
```

#### DockeråŒ–è¨­è¨ˆ
```dockerfile
# Dockerfile
FROM python:3.11-slim
WORKDIR /app
COPY requirements.txt .
RUN pip install -r requirements.txt
COPY . .
EXPOSE 5001
CMD ["gunicorn", "--bind", "0.0.0.0:5001", "app:app"]
```

```yaml
# docker-compose.yml
version: '3.8'
services:
  health-signage:
    build: .
    ports:
      - "5001:5001"
    volumes:
      - ./data:/app/data
    environment:
      - FLASK_ENV=production
      - DATABASE_URL=sqlite:///data/mood.db
```

## ç›£è¦–ãƒ»é‹ç”¨è¨­è¨ˆ

### ãƒ­ã‚°è¨­è¨ˆ
```python
import logging
from logging.handlers import RotatingFileHandler

# ãƒ­ã‚°è¨­å®š
logging.basicConfig(
    handlers=[RotatingFileHandler('app.log', maxBytes=100000, backupCount=10)],
    level=logging.INFO,
    format='%(asctime)s %(levelname)s %(name)s %(message)s'
)

# ä½¿ç”¨ä¾‹
app.logger.info(f'New entry saved: {date}')
app.logger.error(f'Database error: {error}')
```

### ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—æˆ¦ç•¥
```bash
#!/bin/bash
# backup.sh - æ—¥æ¬¡ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
DATE=$(date +%Y%m%d_%H%M%S)
sqlite3 mood.db ".backup backup/mood_${DATE}.db"
gzip backup/mood_${DATE}.db

# 30æ—¥ä»¥ä¸Šå¤ã„ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å‰Šé™¤
find backup/ -name "mood_*.db.gz" -mtime +30 -delete
```

## æ‹¡å¼µè¨­è¨ˆ

### å°†æ¥æ©Ÿèƒ½ã®è¨­è¨ˆæ–¹é‡

#### 1. ãƒãƒ«ãƒãƒ¦ãƒ¼ã‚¶ãƒ¼å¯¾å¿œ
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ†ãƒ¼ãƒ–ãƒ«è¿½åŠ 
CREATE TABLE users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    username TEXT UNIQUE NOT NULL,
    email TEXT UNIQUE NOT NULL,
    password_hash TEXT NOT NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP
);

-- mood_entriesã«user_idè¿½åŠ 
ALTER TABLE mood_entries ADD COLUMN user_id INTEGER REFERENCES users(id);
```

#### 2. é€šçŸ¥æ©Ÿèƒ½
```python
# notification.py
class NotificationService:
    def check_mood_trend(self, user_id):
        # æ°—åˆ†ã®ä½ä¸‹å‚¾å‘ã‚’æ¤œçŸ¥
        recent_moods = get_recent_moods(user_id, days=7)
        if avg(recent_moods) < 2.5:
            send_alert(user_id, "æ°—åˆ†ã®ä½ä¸‹ãŒç¶šã„ã¦ã„ã¾ã™")
```

#### 3. ãƒ‡ãƒ¼ã‚¿ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
```python
@app.route('/api/export/<format>')
def export_data(format):
    if format == 'csv':
        return generate_csv_export()
    elif format == 'json':
        return generate_json_export()
    elif format == 'pdf':
        return generate_pdf_report()
```

---

**æ–‡æ›¸ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0.0  
**æœ€çµ‚æ›´æ–°**: 2025-01-13  
**ä½œæˆè€…**: sourcekatsudon + Claude Code